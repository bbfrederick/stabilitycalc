#!/usr/bin/env python

"""legacy thing for scripts to read paths from the config.ini file"""

import ConfigParser

def stabilityparms(option, section='paths'):
    """
    retrieve a value from the configuration file.
    for legacy use, assume we're looking for a path.
    """

    config = ConfigParser.ConfigParser()

    try:
        config.read('config/config.ini')
    except IOError:
        logging.critical('Failed to open configuration file.')

    try:
        return config.get(section, option.lower())
    except (ConfigParser.NoOptionError, ConfigParser.NoSectionError):
        return ''


if __name__ == '__main__':

    import argparse
    import logging
    logging.basicConfig(format='%(levelname)s:%(message)s')

    parser = argparse.ArgumentParser(description='Retrieve a value from the configuration file.')
    parser.add_argument('option', help='The option to retrieve.')
    parser.add_argument('--section', '-s', default='paths')
    f = parser.parse_args()

    print(stabilityparms(option=f.option, section=f.section))
